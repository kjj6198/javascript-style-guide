<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>字串練習</title>
  <script type="text/javascript">

  </script>
</head>
<body>
  <input type="text" data-length='5' id="remainingCharacters" data-model='Ch'
  name="remainingCharacters"/><br>

</body>
<script type="text/javascript">
  window.onload = function(){
    var forElementArr = function(_elementArr, callBack){
      var arr = _elementArr,
          self = this;
      if(!_elementArr instanceof Array){
        arr = [_elementArr];
      }
      for(var i = 0, arrLen = arr.length; i < arrLen; i++){
        var arrI = arr[i];
        if(typeof arrI == "string"){
          arrI = document.getElementById(arrI);
        }
        callBack && callBack(i, arrI);
      }
    },
    showRemainingCharacters = function(_nums, _remainingCharacters){
      if(_remainingCharacters.search(",") != -1){
        _remainingCharacters = _remainingCharacters.split(",");
      }
      forElementArr(_remainingCharacters, function(_index, _this){
        _this.innerHTML = (_nums && _nums.toString()) || "0";
      })
    },
    remainingCharacters = document.getElementById("remainingCharacters"),
    clearNonumber = function(fThis){
      var _v = tThis.value,
          _vLen = _v.length,
          dataLength = tThis.getAttribute("data-length");
          remainingCharacters = tThis.getAttribute("data-remainingCharacters");

          if(_v.length > dataLength){
            tThis.value = _v.substr(0, dataLength);
          }

      var daraModel = tThis.getAttribute("data-model");
      var subLen = dataLength;
      if(dataModel == "Ch"){
        _vLen = strLen(_v, dataModel);
        var vv = _v.match(/[\u4e00-\u9fa5]/g);
            subLen = dataLength - (!vv ? 0 : vv.length);
      }
    }

  }
</script>
</html>
